# Phase 0 — Alpha 內測 (V0.1)

> **版本**：V0.1 Alpha  
> **時程**：Month 1–3  
> **目標**：完成核心發文/瀏覽/回應功能 + **完整安全防護體系**上線  
> **用戶規模**：內部團隊 + 50 位邀請制測試者  
> **測試地區**：澳門與香港（關懷資源依 GPS 顯示當地熱線，見 [test-regions-macao-hongkong.md](test-regions-macao-hongkong.md)）

---

## 一、階段目標

1. 驗證「GPS 定位匿名心情發文 → 地圖氣泡瀏覽 → 一鍵回應」的核心體驗迴路
2. **安全防護系統 100% 到位**（四層審核 + 三級響應 + 關懷資源），不得留空上線
3. 技術基礎架構就緒，可支撐後續迭代
4. 收集首批用戶回饋，驗證產品核心假設

---

## 二、交付項目

### 2.1 核心功能

| ID | 功能 | 描述 | 參照文件 |
|----|------|------|----------|
| F-001 | GPS 定位心情發文 | 用戶在當前位置發出 ≤150 字心情文 + 心情標籤，每小時最多 3 則 | 03-feature-spec §3.1 |
| F-002 | 心情氣泡瀏覽 | 地圖上顯示附近心情氣泡，點擊可查看詳情 | 03-feature-spec §3.1 |
| F-003-L1 | 罐頭回應 / 表情回應 | 5 種罐頭文 + 6 種表情，每人每則限一次 | 03-feature-spec §3.1 |
| — | 匿名註冊 | 裝置指紋 + UUID，自動生成匿名暱稱 | 12-privacy §12.2 |

### 2.2 安全防護（P0，與核心功能同等優先）

| ID | 功能 | 描述 | 參照文件 |
|----|------|------|----------|
| F-013 | 四層自動審核引擎 | Layer 1 關鍵字 + Layer 2 NLP + Layer 3 行為 + Layer 4 傳染效應，≤200ms | 11-moderation §11.2 |
| F-013 | 三級響應協議 | 紅色（僅作者可見+30min 人工介入）/ 橙色（關懷橫幅+2hr 佇列）/ 黃色（溫和推送） | 11-moderation §11.3 |
| F-013 | 硬性攔截規則 | 具體手段描述、煽動自殺/仇恨/暴力 → 100% 攔截 + 溫暖引導語 | 11-moderation §11.4 |
| F-013 | 瀏覽者保護 | 連續 5 則負面插入休息提醒、1hr 負面上限 15 則、負面不參與推薦加權 | 11-moderation §11.4 |
| F-014 | 關懷資源中心 | 常駐入口：依 GPS 一鍵撥打**香港**（如 2389 2222 / 2382 0000）/**澳門**（如 2852 5222 / 2826 1126）心理援助熱線 + 在地化資源 | 11-moderation §11.5；[test-regions-macao-hongkong.md](test-regions-macao-hongkong.md) |
| — | 關懷卡片推送 | 紅色/橙色警戒觸發時 3 秒內推送全螢幕關懷卡片 | 11-moderation §11.3 |
| — | 檢舉系統 | 一鍵檢舉（含「自殺/自傷」快速通道），自動觸發橙色警戒 | 11-moderation §11.7 |
| — | 人工審核後台 | 分級佇列 dashboard + 紅色警戒 30 分鐘 SLA 流程 | 11-moderation §11.6 |
| — | 安全測試套件 v1 | 攔截率/誤攔率/推送正確性/壓力/語言繞過測試 | 11-moderation §11.9 |

### 2.3 技術基礎架構

| 項目 | 內容 | 參照文件 |
|------|------|----------|
| 後端 | Auth Service + Mood Service + Reaction Service + Moderation Service (Fastify/Python) | 05-tech §5.1 |
| 資料庫 | PostgreSQL + PostGIS（users / moods / reactions 表） | 06-database §6.2 |
| 快取 | Redis（基礎快取） | 05-tech §5.2 |
| API | REST API v1：/auth, /moods, /moods/:id/reactions | 07-api §7.2 |
| 前端 | React Native + Mapbox 地圖（iOS / Android） | 05-tech §5.2 |
| 部署 | Docker Compose (local) + K8s dev 環境 | 13-devops §13.1 |
| CI/CD | GitHub Actions → Lint + Test + Build + Deploy to dev | 13-devops §13.2 |
| NLP | fine-tuned BERT 或 LLM API 接入（自殺/自傷意圖偵測） | 11-moderation §11.2 |
| 關鍵字庫 | 首版多語言關鍵字庫（繁/簡/注音/諧音/Unicode 變體） | 11-moderation §11.2 |

### 2.4 營運準備

| 項目 | 內容 |
|------|------|
| 人工審核團隊 | 至少 2 名完成 PFA 培訓的審核員，24/7 值班排班表 |
| 心理資源合作 | 至少完成 1 間心理健康 NGO 合作意向（關懷卡片文案審核） |
| 關懷卡片文案 | 紅色/橙色/黃色警戒的關懷文案由心理專業人士審核完成 |
| 內測用戶招募 | 50 名邀請制測試者（來源：團隊人脈 + 心理健康社團） |

---

## 三、驗收標準

### 3.1 功能驗收

| # | 驗收項目 | 通過條件 | 驗證方式 |
|---|---------|---------|---------|
| A01 | 匿名註冊 | 用戶無需信箱/手機即可完成註冊並取得 JWT token | 手動測試 + 自動化 E2E |
| A02 | GPS 發文 | 授權定位後可成功發出心情文，地圖上 3 秒內出現氣泡 | 手動測試（iOS + Android） |
| A03 | 心情標籤選擇 | 12 種核心情緒標籤全部可選，選擇後正確對應顏色與圖示 | 手動比對 appendix/B |
| A04 | 氣泡瀏覽 | 地圖載入 < 2 秒，2km 半徑內氣泡正確顯示 | 效能測試 + 手動驗證 |
| A05 | 罐頭回應 | 5 種罐頭文 + 6 種表情全部可用，回應後氣泡上回應數 +1 | 手動測試 |
| A06 | 每人每則限一次 | 同一用戶對同一心情文嘗試第二次回應時，系統正確拒絕 | 自動化測試 |
| A07 | 發文限速 | 同一用戶每小時第 4 則發文被正確拒絕，顯示友善提示 | 自動化測試 |
| A08 | 心情文過期 | 心情文 24h 後自動標記 is_active=false，地圖上不再顯示 | 排程測試 |

### 3.2 安全防護驗收（最高優先，未通過不得上線）

| # | 驗收項目 | 通過條件 | 驗證方式 |
|---|---------|---------|---------|
| S01 | 關鍵字攔截 | 黑名單關鍵字（含繁簡/注音/諧音/Unicode 變體）攔截率 > 99% | 安全測試套件：200+ 測試用例 |
| S02 | 關鍵字誤攔率 | 正常心情文（含「想死了好累」等口語）誤攔率 < 5% | 安全測試套件：500+ 正常文本 |
| S03 | NLP 自殺意圖偵測 | 高風險文本（信心度 > 0.85）正確觸發紅色警戒率 > 95% | NLP 測試集 |
| S04 | NLP 口語區分 | 「我好累想死」等口語化文本不被誤判為紅色警戒 | NLP 測試集：100+ 口語文本 |
| S05 | 紅色警戒流程 | 觸發後：內容僅作者可見 + 3 秒內推送關懷卡片 + 通知人工佇列 | 端到端流程測試 |
| S06 | 橙色警戒流程 | 觸發後：關懷橫幅附加 + 排入優先佇列 + 回應區優先溫暖罐頭 | 端到端流程測試 |
| S07 | 黃色警戒流程 | 連續 3 則負面後推送溫和關懷資源（非阻斷式） | 行為序列測試 |
| S08 | 硬性攔截 | 包含具體自殺手段/煽動自殺/仇恨/暴力的文字 100% 攔截 | 安全測試套件：100+ 極端用例 |
| S09 | 攔截引導語 | 被攔截時顯示溫暖引導語 + 心理資源連結 + 重新編輯選項（非冰冷拒絕） | UI 審查 |
| S10 | 瀏覽者保護 | 連續閱讀 5 則負面後出現休息提醒卡片 | 手動測試 |
| S11 | 負面曝光限制 | 1 小時內高負面心情文上限 15 則，超過後不再載入 | 自動化測試 |
| S12 | 關懷資源中心 | 香港定位時一鍵撥打 2389 2222 / 2382 0000 正常；澳門定位時 2852 5222 / 2826 1126 正常 | 手動測試（iOS + Android）+ 模擬 GPS |
| S13 | GPS 在地化資源 | 香港/澳門 GPS 定位時，App 顯示對應的心理援助熱線與機構列表 | 模擬 GPS 測試（香港/澳門座標） |
| S14 | 檢舉系統 | 一鍵檢舉功能正常，「自殺/自傷」分類自動觸發橙色流程 | 端到端測試 |
| S15 | 人工審核後台 | 紅色事件 30 分鐘內在佇列中可見並可操作 | 後台功能測試 |
| S16 | 審核延遲 | 四層自動審核總延遲 ≤ 200ms (P95) | 壓力測試 |
| S17 | 72h 追蹤關懷 | 紅色警戒後 24h/48h/72h 正確推送關懷訊息 | 排程測試 |

### 3.3 效能驗收

| # | 驗收項目 | 通過條件 | 驗證方式 |
|---|---------|---------|---------|
| P01 | 地圖載入時間 | 首次載入 < 3 秒，後續載入 < 2 秒 | 效能測試（模擬 4G 網路） |
| P02 | API 回應時間 | P95 < 500ms, P99 < 1s | 壓力測試 (k6 / Artillery) |
| P03 | 併發支撐 | 50 名同時線上用戶不出現錯誤 | 壓力測試 |
| P04 | 安全掃描延遲 | 發文 → 安全掃描 → 回應，全程 ≤ 200ms (P95) | 壓力測試 |

### 3.4 營運驗收

| # | 驗收項目 | 通過條件 | 驗證方式 |
|---|---------|---------|---------|
| O01 | 審核員就位 | ≥ 2 名 PFA 培訓合格審核員，排班表覆蓋 24/7 | 培訓證書 + 排班確認 |
| O02 | 關懷文案審核 | 所有警戒等級的關懷卡片文案經心理專業人士簽核 | 簽核紀錄 |
| O03 | 心理資源準確性 | 關懷資源中心所有電話/連結經驗證正確可用 | 逐項撥打/點擊測試 |
| O04 | 安全測試套件 | 完整通過（攔截率 > 99%、誤攔率 < 5%、推送正確性 100%） | 測試報告 |

---

## 四、Go / No-Go 決策

### 必須全部通過（任一未通過即 No-Go）：
- [ ] S01–S17 安全防護驗收全部通過
- [ ] O01–O04 營運驗收全部通過
- [ ] A01–A08 功能驗收全部通過
- [ ] P04 安全掃描延遲達標

### 可以帶條件通過（記錄 known issues，下階段修復）：
- P01–P03 效能指標允許 ±10% 偏差
- UI 細節可列為 V0.5 修復項

---

## 五、風險與緩解

| 風險 | 影響 | 緩解措施 |
|------|------|---------|
| NLP 模型精度不足 | 漏判/誤判率偏高 | 初期提高關鍵字 Layer 1 覆蓋，NLP 作為輔助；設定較低信心度門檻寧嚴勿鬆 |
| PFA 審核員招募困難 | 無法覆蓋 24/7 | 初期核心時段 (18:00–06:00) 必須覆蓋，其餘時段由團隊成員輪值 |
| 內測用戶不足 | 無法驗證產品假設 | 降低門檻至 30 人，團隊成員預埋每日心情文 |

---

## 六、階段產出文件

完成本階段後應產出：
- [ ] Alpha 測試報告（功能 + 安全 + 效能）
- [ ] 安全測試套件 v1 執行結果
- [ ] 用戶回饋摘要（質化 + 量化）
- [ ] 待修復問題清單（標注優先級與預計修復版本）
- [ ] Phase 1 進入準備確認書
